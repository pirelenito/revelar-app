<!-- <!DOCTYPE html> -->
<html>
  <head>
    <title>Revelar</title>
  </head>
  <body>
    <h1>Revelar App</h1>

    <input id="choose-slides" type="file" webkitdirectory/>
    <p class="path"></p>
    <button class="open-browser">Open presentation</button>

    <style>
      html {
       overflow: auto;
      }

      html, body {
       margin: 0px;
       padding: 0px;
       height: 100%;
      }

      #presentation-container {
        position: absolute;
        top: 0px;
        right: 0;
        left: 0;
        bottom: 0;
      }

      #presentation {
        display: block;
        width: 100%;
        height: 100%;
      }

      #controls {
        background: red;
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
        height: 300px;
        opacity: 0.5;
        z-index: 1;
      }
    </style>

    <div id="controls">
      <input id="open-presentation" type="file" webkitdirectory />
    </div>

    <div id="presentation-container">
      <iframe nwdisable id="presentation" src="open-a-presentation.html" frameborder="0"></iframe>
    </div>

    <script>
      var Presentation = require('./lib/presentation'),
          presentation = null;

      var chooser = document.querySelector('#open-presentation');
      chooser.addEventListener("change", function() {
        if (presentation) {
          console.log('closing previous presentation');
          presentation.close();
        }

        var slidesFolder = this.value;

        presentation = new Presentation(slidesFolder);

        presentation.open().then(function (targetFile) {
          document.getElementById('presentation').src = 'file://' + targetFile;
          return presentation.render();
        }).then(refresh);


        function refresh () {
          setTimeout(function () {
            document.getElementById('presentation').contentWindow.location.reload();
          }, 10);
        }

        presentation.onChange = refresh;
      }, false);



    </script>

    <script>
      // var fs = require('fs');

      // fs.watch('./', function() {
      //   if (location)
      //     location.reload();
      // });
    </script>

  </body>
</html>
